{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      adress,\n      headers\n    } = _ref;\n    this._adress = adress;\n    this._headers = headers;\n  }\n\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка ${res.status}`);\n    }\n\n    return res.json();\n  } // загрука информации пользователя\n\n\n  getUserInfo() {\n    return fetch(`${this._adress}/users/me`, {\n      headers: this._headers,\n      credentials: 'include'\n    }).then(this._getResponseData);\n  } // загрузка карточек\n\n\n  getCards() {\n    return fetch(`${this._adress}/cards`, {\n      headers: this._headers,\n      credentials: 'include'\n    }).then(res => {\n      if (!res.ok) {\n        return Promise.reject(`Ошибка ${res.status}`);\n      }\n\n      console.log(res.json);\n      return res.json();\n    });\n  } // отправка информации о пользователе на сервер\n\n\n  editInfo(name, status) {\n    return fetch(`${this._adress}/users/me`, {\n      method: \"PATCH\",\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: status\n      })\n    }).then(this._getResponseData);\n  } // загрузка карточки на сервер\n\n\n  uploadCard(cardName, cardLink) {\n    return fetch(`${this._adress}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      credentials: 'include',\n      body: JSON.stringify({\n        name: cardName,\n        link: cardLink\n      })\n    }).then(this._getResponseData);\n  } // удаление карточки\n\n\n  deleteCard(cardId, isMine) {\n    if (isMine) {\n      return fetch(`${this._adress}/cards/${cardId}`, {\n        method: \"DELETE\",\n        credentials: 'include',\n        headers: this._headers\n      }).then(this._getResponseData);\n    }\n  } // изменение лайка (добавление или удаление)\n\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return fetch(`${this._adress}/cards/${cardId}/likes`, {\n        method: \"DELETE\",\n        credentials: 'include',\n        headers: this._headers\n      }).then(this._getResponseData);\n    } else {\n      return fetch(`${this._adress}/cards/${cardId}/likes`, {\n        method: \"PUT\",\n        credentials: 'include',\n        headers: this._headers\n      }).then(this._getResponseData);\n    }\n  } // изминение аватарка пользователя\n\n\n  changeAvatar(link) {\n    return fetch(`${this._adress}/users/me/avatar`, {\n      method: \"PATCH\",\n      credentials: 'include',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: link\n      })\n    }).then(this._getResponseData);\n  }\n\n} // создание класса АПИ и его экспорт\n\n\nexport const api = new Api({\n  adress: 'https://plavskikh.mesto.nomorepartiesxyz.ru',\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});","map":{"version":3,"sources":["C:/Users/hiksvalP/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","constructor","adress","headers","_adress","_headers","_getResponseData","res","ok","Promise","reject","status","json","getUserInfo","fetch","credentials","then","getCards","console","log","editInfo","name","method","body","JSON","stringify","about","uploadCard","cardName","cardLink","link","deleteCard","cardId","isMine","changeLikeCardStatus","isLiked","changeAvatar","avatar","api"],"mappings":"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","sourcesContent":["class Api {\r\n    constructor({adress, headers}) {\r\n        this._adress = adress;\r\n        this._headers = headers;\r\n    }\r\n\r\n\r\n    _getResponseData(res) {\r\n        if (!res.ok) {\r\n            return Promise.reject(`Ошибка ${res.status}`) \r\n        }\r\n        return res.json();\r\n    } \r\n\r\n    // загрука информации пользователя\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this._adress}/users/me`, {\r\n            headers: this._headers,\r\n            credentials: 'include',\r\n        }).then(this._getResponseData)\r\n    }\r\n\r\n    // загрузка карточек\r\n\r\n    getCards() {\r\n        return fetch(`${this._adress}/cards`, {\r\n            headers: this._headers,\r\n            credentials: 'include',\r\n        }).then((res) => {\r\n            if (!res.ok) {\r\n                return Promise.reject(`Ошибка ${res.status}`) \r\n            }\r\n            console.log(res.json);\r\n            return res.json();\r\n        })\r\n    }\r\n  \r\n    // отправка информации о пользователе на сервер\r\n\r\n    editInfo(name, status) {\r\n        return fetch(`${this._adress}/users/me`, {\r\n            method: \"PATCH\",\r\n            credentials: 'include',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: name,\r\n                about: status\r\n            })\r\n        }).then(this._getResponseData)\r\n    }\r\n\r\n    // загрузка карточки на сервер\r\n\r\n    uploadCard(cardName, cardLink) {\r\n        return fetch(`${this._adress}/cards`, {\r\n            method: \"POST\",\r\n            headers: this._headers,\r\n            credentials: 'include',\r\n            body: JSON.stringify({\r\n                name: cardName,\r\n                link: cardLink\r\n            })\r\n        }).then(this._getResponseData)\r\n    }\r\n\r\n    // удаление карточки\r\n\r\n    deleteCard(cardId, isMine) {\r\n        if(isMine) {\r\n                return fetch(`${this._adress}/cards/${cardId}`, {\r\n                method: \"DELETE\",\r\n                credentials: 'include',\r\n                headers: this._headers,\r\n            }).then(this._getResponseData)\r\n        }\r\n    }\r\n\r\n    // изменение лайка (добавление или удаление)\r\n    changeLikeCardStatus(cardId, isLiked) {\r\n        if(isLiked) {\r\n            return fetch(`${this._adress}/cards/${cardId}/likes`, {\r\n                method: \"DELETE\",\r\n                credentials: 'include',\r\n                headers: this._headers,\r\n            }).then(this._getResponseData)\r\n        } else {\r\n            return fetch(`${this._adress}/cards/${cardId}/likes`, {\r\n                method: \"PUT\",\r\n                credentials: 'include',\r\n                headers: this._headers,\r\n            }).then(this._getResponseData)\r\n        }\r\n    } \r\n    \r\n    // изминение аватарка пользователя\r\n\r\n    changeAvatar(link) {\r\n        return fetch(`${this._adress}/users/me/avatar`, {\r\n            method: \"PATCH\",\r\n            credentials: 'include',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: link\r\n            })\r\n        }).then(this._getResponseData)\r\n    }\r\n}\r\n    // создание класса АПИ и его экспорт\r\n\r\nexport const api = new Api({\r\n    adress: 'https://plavskikh.mesto.nomorepartiesxyz.ru',\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n})"]},"metadata":{},"sourceType":"module"}